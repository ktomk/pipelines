<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link href=https://ktomk.github.io/pipelines/doc/PIPELINES-VARIABLE-REFERENCE.html rel=canonical><link rel=icon href=../../assets/favicon.png><meta name=generator content="mkdocs-1.2.3, mkdocs-material-7.3.6"><title>Pipelines Environment Variable Usage - Pipelines - Run Bitbucket Pipelines Wherever They Dock</title><link rel=stylesheet href=../../assets/stylesheets/main.a57b2b03.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.3f5d1f46.min.css><link rel=stylesheet href=../../assets/extra.css></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary data-md-color-accent> <script>function __prefix(e){return new URL("../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script> <script>var palette=__get("__palette");if(null!==palette&&"object"==typeof palette.color)for(var key in palette.color)document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#pipelines-environment-variable-usage class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../index.html title="Pipelines - Run Bitbucket Pipelines Wherever They Dock" class="md-header__button md-logo" aria-label="Pipelines - Run Bitbucket Pipelines Wherever They Dock" data-md-component=logo> <img src=../../assets/logo.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Pipelines - Run Bitbucket Pipelines Wherever They Dock </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Pipelines Environment Variable Usage </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary data-md-color-accent aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=red data-md-color-accent=red aria-label="Switch to light mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3z"/></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/ktomk/pipelines/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> ktomk/pipelines </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../index.html class=md-tabs__link> Read Me </a> </li> <li class=md-tabs__item> <a href=../PIPELINES-OFFLINE.html class="md-tabs__link md-tabs__link--active"> Docs </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../index.html title="Pipelines - Run Bitbucket Pipelines Wherever They Dock" class="md-nav__button md-logo" aria-label="Pipelines - Run Bitbucket Pipelines Wherever They Dock" data-md-component=logo> <img src=../../assets/logo.svg alt=logo> </a> Pipelines - Run Bitbucket Pipelines Wherever They Dock </label> <div class=md-nav__source> <a href=https://github.com/ktomk/pipelines/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> ktomk/pipelines </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_1 type=checkbox id=__nav_1> <label class=md-nav__link for=__nav_1> Read Me <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Read Me" data-md-level=1> <label class=md-nav__title for=__nav_1> <span class="md-nav__icon md-icon"></span> Read Me </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../index.html class=md-nav__link> Pipelines </a> </li> <li class=md-nav__item> <a href=../../CHANGELOG.html class=md-nav__link> Change Log </a> </li> <li class=md-nav__item> <a href=../../COPYING.html class=md-nav__link> Copying </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2 type=checkbox id=__nav_2 checked> <label class=md-nav__link for=__nav_2> Docs <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Docs data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Docs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../PIPELINES-OFFLINE.html class=md-nav__link> Working Offline </a> </li> <li class=md-nav__item> <a href=../PIPELINES-CACHES.html class=md-nav__link> Working with Pipeline Caches </a> </li> <li class=md-nav__item> <a href=../PIPELINES-SERVICES.html class=md-nav__link> Working with Pipeline Services </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_4 type=checkbox id=__nav_2_4 checked> <label class=md-nav__link for=__nav_2_4> Reference <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Reference data-md-level=2> <label class=md-nav__title for=__nav_2_4> <span class="md-nav__icon md-icon"></span> Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Pipelines Environment Variable Usage <span class="md-nav__icon md-icon"></span> </label> <a href=../PIPELINES-VARIABLE-REFERENCE.html class="md-nav__link md-nav__link--active"> Pipelines Environment Variable Usage </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#default-variables class=md-nav__link> Default Variables </a> </li> <li class=md-nav__item> <a href=#comments-on-support-and-usage class=md-nav__link> Comments on Support and Usage </a> <nav class=md-nav aria-label="Comments on Support and Usage"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#unsupported-features-and-environment-variables class=md-nav__link> Unsupported Features and Environment Variables </a> </li> <li class=md-nav__item> <a href=#dealing-w-secrets-as-variable-values class=md-nav__link> Dealing w/ Secrets as Variable Values </a> </li> <li class=md-nav__item> <a href=#example-configuration-of-an-environment-file class=md-nav__link> Example Configuration of an Environment File </a> </li> <li class=md-nav__item> <a href=#why-multi-line-comments class=md-nav__link> Why Multi-Line Comments? </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#environment-parameters-considered-for-distribution class=md-nav__link> Environment Parameters Considered for Distribution </a> </li> <li class=md-nav__item> <a href=#references class=md-nav__link> References </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../CONFIGURATION-PARAMETERS.html class=md-nav__link> Configuration Parameters </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_5 type=checkbox id=__nav_2_5> <label class=md-nav__link for=__nav_2_5> How-To <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=How-To data-md-level=2> <label class=md-nav__title for=__nav_2_5> <span class="md-nav__icon md-icon"></span> How-To </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../PIPELINES-HOWTO-DOCKER-CLIENT-BINARY.html class=md-nav__link> Docker Client Binary Packages for Pipelines </a> </li> <li class=md-nav__item> <a href=../PIPELINES-HOWTO-ROOTLESS.html class=md-nav__link> Rootless Pipelines </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_6 type=checkbox id=__nav_2_6> <label class=md-nav__link for=__nav_2_6> Appendix <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Appendix data-md-level=2> <label class=md-nav__title for=__nav_2_6> <span class="md-nav__icon md-icon"></span> Appendix </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../DEVELOPMENT.html class=md-nav__link> Utility Development </a> </li> <li class=md-nav__item> <a href=../DOCKER-NAME-TAG.html class=md-nav__link> Docker Container (Image/Tag) Name Syntax </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#default-variables class=md-nav__link> Default Variables </a> </li> <li class=md-nav__item> <a href=#comments-on-support-and-usage class=md-nav__link> Comments on Support and Usage </a> <nav class=md-nav aria-label="Comments on Support and Usage"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#unsupported-features-and-environment-variables class=md-nav__link> Unsupported Features and Environment Variables </a> </li> <li class=md-nav__item> <a href=#dealing-w-secrets-as-variable-values class=md-nav__link> Dealing w/ Secrets as Variable Values </a> </li> <li class=md-nav__item> <a href=#example-configuration-of-an-environment-file class=md-nav__link> Example Configuration of an Environment File </a> </li> <li class=md-nav__item> <a href=#why-multi-line-comments class=md-nav__link> Why Multi-Line Comments? </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#environment-parameters-considered-for-distribution class=md-nav__link> Environment Parameters Considered for Distribution </a> </li> <li class=md-nav__item> <a href=#references class=md-nav__link> References </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/ktomk/pipelines/edit/master/doc/PIPELINES-VARIABLE-REFERENCE.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg> </a> <h1 id=pipelines-environment-variable-usage>Pipelines Environment Variable Usage<a class=headerlink href=#pipelines-environment-variable-usage title="Permanent link">&para;</a></h1> <p>Environment variables (also known as environment parameters) are a first grade citizen of the <code>pipelines</code> utility.</p> <p>The <code>pipelines</code> utility has support for Bitbucket Cloud Pipelines Plugin environment variables. This document describes along the <a href=https://confluence.atlassian.com/bitbucket/environment-variables-794502608.html>list of default variables</a> [BBPL-ENV] the level of support and provides useful information for setting and using these variables.</p> <p>This document is a lengthier review of all variables at the time of writing and provides additional information next to the short introduction in the <a href=../..#environment>read me</a>, both for limitations of the <code>pipelines</code> utility to this regard (and therefore feature planning) <em>and</em> usage guidelines for "dot env" environment files in project scope in a suggested (and best-intend compatible) fashion (fa&ccedil;on).</p> <h2 id=default-variables>Default Variables<a class=headerlink href=#default-variables title="Permanent link">&para;</a></h2> <table> <thead> <tr> <th>Variable Name</th> <th>Remarks</th> </tr> </thead> <tbody> <tr> <td><code>CI</code></td> <td><em>all</em> options; always set to "<code>true</code>"</td> </tr> <tr> <td><code>BITBUCKET_BOOKMARK</code></td> <td><code>--trigger &lt;ref&gt;</code> where <code>&lt;ref&gt;</code> is <code>bookmark:&lt;name&gt;</code>; for Mercurial projects</td> </tr> <tr> <td><code>BITBUCKET_BRANCH</code></td> <td><code>--trigger &lt;ref&gt;</code> where <code>&lt;ref&gt;</code> is <code>branch:&lt;name&gt;</code>, <code>pr:&lt;name&gt;</code>, <code>pr:&lt;source&gt;:&lt;destination&gt;</code>; (source) branch</td> </tr> <tr> <td><code>BITBUCKET_BUILD_NUMBER</code></td> <td><em>all</em> options; always set to "<code>0</code>"</td> </tr> <tr> <td><code>BITBUCKET_CLONE_DIR</code></td> <td><em>all</em> options; set by pipelines, it is the deploy directory inside the container (not clone directory) as pipelines has more options than cloning (it currently actually never clones)</td> </tr> <tr> <td><code>BITBUCKET_COMMIT</code></td> <td><em>all</em> options; always set to "<code>0000000000000000000000000000000000000000</code>"</td> </tr> <tr> <td><code>BITBUCKET_DEPLOYMENT_ENVIRONMENT</code></td> <td>-/-; currently unsupported</td> </tr> <tr> <td><nobr><code>BITBUCKET_DEPLOYMENT_ENVIRONMENT_UUID</code></nobr></td> <td>-/-; currently unsupported</td> </tr> <tr> <td><code>BITBUCKET_EXIT_CODE</code></td> <td><em>all</em> options; set to the exit status of the <code>script</code> for use in the <code>after-script</code></td> </tr> <tr> <td><code>BITBUCKET_GIT_HTTP_ORIGIN</code></td> <td>-/-; currently unsupported</td> </tr> <tr> <td><code>BITBUCKET_GIT_SSH_ORIGIN</code></td> <td>-/-; currently unsupported</td> </tr> <tr> <td><code>BITBUCKET_PARALLEL_STEP</code></td> <td><em>all</em> options; in a parallel step set to zero-based index of the current step in the group, e.g. 0, 1, 2, ...</td> </tr> <tr> <td><code>BITBUCKET_PARALLEL_STEP_COUNT</code></td> <td><em>all</em> options; in a parallel step set to the total number of steps in the group, e.g. 5.</td> </tr> <tr> <td><code>BITBUCKET_PR_DESTINATION_BRANCH</code></td> <td><code>--trigger &lt;ref&gt;</code> where <code>&lt;ref&gt;</code> is <code>pr:&lt;source&gt;:&lt;destination&gt;</code> for the <code>&lt;destination&gt;</code> branch (see as well <code>BITBUCKET_BRANCH</code>); destination branch</td> </tr> <tr> <td><code>BITBUCKET_PR_ID</code></td> <td>-/-; currently unsupported</td> </tr> <tr> <td><code>BITBUCKET_PROJECT_KEY</code></td> <td>-/-; currently unsupported</td> </tr> <tr> <td><code>BITBUCKET_PROJECT_UUID</code></td> <td>-/-; currently unsupported</td> </tr> <tr> <td><code>BITBUCKET_REPO_FULL_NAME</code></td> <td>-/-; currently unsupported</td> </tr> <tr> <td><code>BITBUCKET_REPO_OWNER</code></td> <td><em>all</em> options; always set to current username from environment or if not available "<code>nobody</code>" (which might align w/ the Apache httpd project)</td> </tr> <tr> <td><code>BITBUCKET_REPO_OWNER_UUID</code></td> <td>-/-; currently unsupported</td> </tr> <tr> <td><code>BITBUCKET_REPO_SLUG</code></td> <td><em>all</em> options; always set to base name of project directory</td> </tr> <tr> <td><code>BITBUCKET_REPO_UUID</code></td> <td>-/-; currently unsupported</td> </tr> <tr> <td><code>BITBUCKET_STEP_RUN_NUMBER</code></td> <td><em>all</em> options; defaults to "<code>1</code>" and is set to "<code>1</code>" <em>after</em> the first run step</td> </tr> <tr> <td><code>BITBUCKET_STEP_TRIGGERER_UUID</code></td> <td>-/-; currently unsupported</td> </tr> <tr> <td><code>BITBUCKET_TAG</code></td> <td><code>--trigger &lt;ref&gt;</code> where <code>&lt;ref&gt;</code> is <code>tag:&lt;name&gt;</code>; Git projects</td> </tr> </tbody> </table> <h2 id=comments-on-support-and-usage>Comments on Support and Usage<a class=headerlink href=#comments-on-support-and-usage title="Permanent link">&para;</a></h2> <p>All environment variables are supported in the meaning they can be explicitly passed with any value of the users wish (or command) into the container. That is even true for those variables "always" set to a specific value - variables passed by the user will always override any automatically "always" set values.</p> <h3 id=unsupported-features-and-environment-variables>Unsupported Features and Environment Variables<a class=headerlink href=#unsupported-features-and-environment-variables title="Permanent link">&para;</a></h3> <p>Some variables yet do not make sense as the pipelines utility does not support the underlying feature.</p> <p>For example, the variable <code>BITBUCKET_DEPLOYMENT_ENVIRONMENT</code> and the depployments are not (yet) supported, therefore the variable <code>BITBUCKET_DEPLOYMENT_ENVIRONMENT</code> is not set. Setting it before call makes not much sense as it would be set for every script, and not the deployment script only.</p> <p><em>However:</em> Some variables which are valid per project and which are marked "currently unsupported" above do make sense to be put into the auto-loading environment files (<code>.env</code> and <code>.env.dist</code>). As long as their values are <em>not</em> considered a secret, they can be added including the values to <code>.env.dist</code> which intention is to be committed in the project repository (see your VCS/SCMs' documentation, e.g. <a href=https://git-scm.com/docs/gitignore>for <code>git</code> see git-ignore</a> [GIT-IGNORE]).</p> <p>Otherwise, instead of poisoning your local environment, project secrets <em>can</em> be put into the private <code>.env</code> file (or any other <code>*.env</code> file via the <code>--env-file</code> option).</p> <p>This is as long as you consider your local system safe (if your computer is connected to the internet this might not be the case and might be an overall short-coming with the Atlassian Bitbucket Cloud Pipelines Plugin, take care [!] as <em>Secured Variables</em> are just <em>masked</em> and can be read by any user who has write access to a Bitbucket repository - similar to read access on a/your local system).</p> <h3 id=dealing-w-secrets-as-variable-values>Dealing w/ Secrets as Variable Values<a class=headerlink href=#dealing-w-secrets-as-variable-values title="Permanent link">&para;</a></h3> <p>For secret environment parameters, put them into the <code>.env</code> file only (or other <code>.env</code> files - if at all) which by intention is/are <em>not</em> to be committed in the project repository.</p> <p>However: <em>Required</em> variables (with secrets) <em>should</em> be added with their name <em>only</em> to <code>.env.dist</code> file which is the project distribution parameter definition so that it clearly is documented which variables <em>are</em> required (this can be very helpful to document which secrets are needed and for non-secret what [sane] defaults are).</p> <h3 id=example-configuration-of-an-environment-file>Example Configuration of an Environment File<a class=headerlink href=#example-configuration-of-an-environment-file title="Permanent link">&para;</a></h3> <p><em>Example configuration in a git based project with "dot env" files as they work w/ the pipelines utility:</em></p> <p>The pipelines utility adheres to environment files as by the Docker project. That is mainly b/c it is highly dependent on the Docker client utility and the environment file-format in the Docker project ships with all needed features:</p> <ul> <li><strong>environment variables</strong>,</li> <li>environment parameter <strong>imports</strong> / <strong>definitions</strong> and</li> <li><strong>comments</strong> .</li> </ul> <p>The following example consists of three files: First a <code>.gitignore</code> file that takes care that no environment files but <code>.env.dist</code> is getting committed to the git repository.</p> <p>This is necessary as these files might contain secrets (even in plain text) which <em>should never</em> go into the projects history (applies to <code>git</code>-utility managed projects only for <code>.gitignore</code> see your VCS utility if different for similar options).</p> <p>From <code>pipelines</code> perspective, the file intended to be committed is the <code>.env.dist</code> file. It should contain all major variables but no secrets. This is possible by writing down the <em>variable (parameter) name</em> <strong>only</strong>. One such variable in the example is <code>AWS_ACCESS_KEY_ID</code>. The key-id and the access key are considered a secret in the following example.</p> <p>The <code>.env</code> file then (can) contain private information if ok persisted in the local file-system. Different <em>dot-env</em> files can be provided w/ the <code>--env-file &lt;path&gt;</code> option of the <code>pipelines</code> (or <code>docker</code>) utility.</p> <ul> <li> <p><code>.gitignore</code> file: </p><div class=highlight><pre><span></span><code># ...

# Private environment variable files (dot env)
/.env*
!/.env.dist

# ...
</code></pre></div> <p><em>(for more information on the <code>.gitignore</code> file format best see the <a href=https://git-scm.com/docs/gitignore>gitignore documentation</a> [GIT-IGNORE])</em></p> </li> <li> <p><code>.env.dist</code> file: </p><div class=highlight><pre><span></span><code><span class=c1># ---</span>
<span class=c1># Pipeline: Gitlab Cloud Project</span>
<span class=c1>#</span>
<span class=nv>BITBUCKET_REPO_OWNER</span><span class=o>=</span>ACME.Inc.
<span class=nv>BITBUCKET_REPO_OWNER_UUID</span><span class=o>=</span>894510a8-be2a-4660-a276-10fd5280cc61
<span class=nv>BITBUCKET_REPO_SLUG</span><span class=o>=</span>sudo-make-sandwich
<span class=nv>BITBUCKET_REPO_UUID</span><span class=o>=</span>894510a8-be2a-4660-a276-10fd5280cc61

<span class=c1># ---</span>
<span class=c1># Pipeline: AWS ECR</span>
<span class=c1>#</span>
<span class=nv>AWS_REGION</span><span class=o>=</span>eu-west-1
AWS_ACCESS_KEY_ID
AWS_SECRET_ACCESS_KEY
</code></pre></div> <p><em>(secrets in this <code>.env</code> file are hidden, only their variable names are given, e.g. <code>AWS_SECRET_ACCESS_KEY</code>)</em></p> </li> <li> <p><code>.env</code> file: </p><div class=highlight><pre><span></span><code><span class=c1># ---</span>
<span class=c1># Pipeline: AWS ECR</span>
<span class=c1>#</span>
<span class=nv>AWS_REGION</span><span class=o>=</span>eu-west-1
<span class=nv>AWS_ACCESS_KEY_ID</span><span class=o>=</span>ETI1ZUOWJ2GO5Q8IDFDC
<span class=nv>AWS_SECRET_ACCESS_KEY</span><span class=o>=</span>IzuobhF55og9fel6hleyuo4UOA0lUL9+GE2RmH6J
</code></pre></div> </li> </ul> <p>This example provides the project-wide information which environment variables are required for it. Additionally the project-wide default values are provided and the configuration setup does allow (local) (secret) configuration.</p> <p>The comment blocks for a section are multi-line and follow an exemplary format of the first line of the comment block having a separating three-dash-line and a single (empty) line at the end after the second line containing a section title so that it is easy to <em>diff</em> between <code>.env</code> and <code>.env.dist</code> (and other) files.</p> <h3 id=why-multi-line-comments>Why Multi-Line Comments?<a class=headerlink href=#why-multi-line-comments title="Permanent link">&para;</a></h3> <p>Why multi-line comments? In practice I found that single line comments are not that practical with text differs for <em>sections</em>, actually this is how this format came to life; when using various <code>diff</code>-utilities to compare these various <em>dot-env</em> files.</p> <p>It is however up to every users discreet own experience(s) and need(s) on how to introduce sections in dot env files. It is only a subjective suggestion.</p> <p><strong>Note</strong> that there is a single empty line before any other <em>but</em> the first section comment block <em>if</em> the first section comment block starts on the very first line of the file. This is crucial for all <em>differs</em> I've run across.</p> <h2 id=environment-parameters-considered-for-distribution>Environment Parameters Considered for Distribution<a class=headerlink href=#environment-parameters-considered-for-distribution title="Permanent link">&para;</a></h2> <p>If a project fully relies on Atlassian Bitbucket Cloud Pipelines Environment (by my reading of their documentation) the following environment variables and values should be distributed within the project:</p> <ul> <li><code>BITBUCKET_PROJECT_KEY</code></li> <li><code>BITBUCKET_PROJECT_UUID</code></li> <li><code>BITBUCKET_REPO_FULL_NAME</code></li> <li><code>BITBUCKET_REPO_OWNER</code></li> <li><code>BITBUCKET_REPO_OWNER_UUID</code></li> <li><code>BITBUCKET_REPO_SLUG</code> - if not matching project base name</li> <li><code>BITBUCKET_REPO_UUID</code></li> </ul> <blockquote> <p><strong>Note:</strong> Perhaps UUID values are gained best via the Bitbucket Cloud REST API on the shell command line.</p> </blockquote> <h2 id=references>References<a class=headerlink href=#references title="Permanent link">&para;</a></h2> <ul> <li>[BBPL-ENV]: <a href=https://confluence.atlassian.com/bitbucket/environment-variables-794502608.html>https://confluence.atlassian.com/bitbucket/environment-variables-794502608.html</a></li> <li>[GIT-IGNORE]: <a href=https://git-scm.com/docs/gitignore>https://git-scm.com/docs/gitignore</a></li> </ul> </article> </div> </div> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../PIPELINES-SERVICES.html class="md-footer__link md-footer__link--prev" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> Working with Pipeline Services </div> </div> </a> <a href=../CONFIGURATION-PARAMETERS.html class="md-footer__link md-footer__link--next" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> Configuration Parameters </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> Made by <a href=https://ktomk.github.io/ title="Ktomk home on Github Pages"> Ktomk on Github.io </a> </div> <div class=md-footer-social> <a href=https:/ktomk.github.io/pipelines/index.html target=_blank rel=noopener title="Pipelines homepage" class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 96 96"> <path d="m 48.001503,8 c -3.067868,0 -6.135869,1.17553 -8.486698,3.52617 L 11.526141,39.51326 c -4.7015212,4.70127 -4.7015212,12.27021 0,16.97135 l 17.024333,17.02351 9.563268,-29.42914 a 6.6334399,6.6329078 0 0 1 0.151061,-0.49991 6.6334399,6.6329078 0 0 1 0.169254,-0.48603 L 49.792552,8.13582 C 49.199219,8.04692 48.600226,8 48.001503,8 Z m 13.110599,8.14969 -5.941417,18.28527 h 24.228283 z m -9.951098,31.52579 a 6.6334399,6.6329078 0 0 1 -0.284874,0.0135 6.6334399,6.6329078 0 0 1 -0.169255,0.4847 l -11.647547,35.84504 0.455477,0.45544 c 4.701656,4.70116 12.271874,4.70116 16.973395,0 L 84.477538,56.48694 c 2.433434,-2.43311 3.60366,-5.63438 3.518089,-8.80901 z"/> </svg> </a> <a href=https://github.com/ktomk/pipelines target=_blank rel=noopener title="Pipelines utility Github repository" class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> <a href=https://hub.docker.com/r/ktomk/pipelines target=_blank rel=noopener title="Pipelines test container images on Docker Hub" class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 640 512"><path d="M349.9 236.3h-66.1v-59.4h66.1v59.4zm0-204.3h-66.1v60.7h66.1V32zm78.2 144.8H362v59.4h66.1v-59.4zm-156.3-72.1h-66.1v60.1h66.1v-60.1zm78.1 0h-66.1v60.1h66.1v-60.1zm276.8 100c-14.4-9.7-47.6-13.2-73.1-8.4-3.3-24-16.7-44.9-41.1-63.7l-14-9.3-9.3 14c-18.4 27.8-23.4 73.6-3.7 103.8-8.7 4.7-25.8 11.1-48.4 10.7H2.4c-8.7 50.8 5.8 116.8 44 162.1 37.1 43.9 92.7 66.2 165.4 66.2 157.4 0 273.9-72.5 328.4-204.2 21.4.4 67.6.1 91.3-45.2 1.5-2.5 6.6-13.2 8.5-17.1l-13.3-8.9zm-511.1-27.9h-66v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm-78.1-72.1h-66.1v60.1h66.1v-60.1z"/></svg> </a> <a href=https://ktomk.github.io/ target=_blank rel=noopener title=ktomk.github.io class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 640 512"><path d="m278.9 511.5-61-17.7c-6.4-1.8-10-8.5-8.2-14.9L346.2 8.7c1.8-6.4 8.5-10 14.9-8.2l61 17.7c6.4 1.8 10 8.5 8.2 14.9L293.8 503.3c-1.9 6.4-8.5 10.1-14.9 8.2zm-114-112.2 43.5-46.4c4.6-4.9 4.3-12.7-.8-17.2L117 256l90.6-79.7c5.1-4.5 5.5-12.3.8-17.2l-43.5-46.4c-4.5-4.8-12.1-5.1-17-.5L3.8 247.2c-5.1 4.7-5.1 12.8 0 17.5l144.1 135.1c4.9 4.6 12.5 4.4 17-.5zm327.2.6 144.1-135.1c5.1-4.7 5.1-12.8 0-17.5L492.1 112.1c-4.8-4.5-12.4-4.3-17 .5L431.6 159c-4.6 4.9-4.3 12.7.8 17.2L523 256l-90.6 79.7c-5.1 4.5-5.5 12.3-.8 17.2l43.5 46.4c4.5 4.9 12.1 5.1 17 .6z"/></svg> </a> <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener title="Made with Material for MkDocs + Mkdocs + Makefile + <3" class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 89 89"> <path d=M3.136,17.387l0,42.932l42.932,21.467l-42.932,-64.399Z /> <path d=M21.91,8l42.933,64.398l-18.775,9.388l-42.932,-64.399l18.774,-9.387Z style="fill-opacity: 0.5"/> <path d=M67.535,17.387l-27.262,18.156l21.878,32.818l5.384,2.691l0,-53.665Z /> <path d=M67.535,17.387l0,53.666l18.774,-9.388l0,-53.665l-18.774,9.387Z style="fill-opacity: 0.25"/> </svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["tabs", "navigation.tabs"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../assets/javascripts/workers/search.fcfe8b6d.min.js", "version": null}</script> <script src=../../assets/javascripts/iframe-worker-0.2.0.js></script> <script src=../../search/search_index.js></script> <script src=../../assets/javascripts/bundle.b1047164.min.js></script> </body> </html>
